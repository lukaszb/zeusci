{% extends "zeus/project.html" %}
{% load jsonify from zeus %}

{% block init_js %}
{{ block.super }}
<script type="text/javascript">
    zeus_buildset = {{ buildset|jsonify }};
</script>
{% endblock %}

{% block content %}

{% comment %}
BuildsetDetailController expects to be wrapped by ProjectDetailController so
'project' should be already available at the scope 
{% endcomment %}
<div ng-controller="BuildsetDetailController" ng-init='init({{ buildset|jsonify|jsonify }})'>
{% verbatim %}

<dl class="dl-horizontal">
    <dt>Buildset</dt>
    <dd>{{ buildset.number }}</dd>
    <dt>Status</dt>
    <dd><span class="label label-{{ buildset.status | statusToBadgeClass }}">{{ buildset.status | uppercase }}</span></dd>
</dl>
{% endverbatim %}

{% block build_content %}
{% verbatim %}

<table class="table table-striped table-bordered table-condensed table-hover">
    <caption>Builds</caption>
    <thead>
        <tr>
            <th>Build</th>
            <th>Status</th>
            <th>Started</th>
            <th>Finished</th>
            <th>Duration</th>
        </tr>
    </thead>
    <tbody>
        <tr class="{{ build.status | statusToClass }}" ng-repeat="build in buildset.builds">
            <td><a class="block" href="{{ build.url }}">{{ build.number }}</a></td>
            <td><span class="label label-{{ buildset.status | statusToBadgeClass }}">{{ buildset.status | uppercase }}</span></td>
            <td>{{ build.created_at | date:"medium" }}</td>
            <td>{{ build.finished_at | date:"medium" }}</td>
            <td>{{ build.duration }}</td>
        </tr>
    </tbody>
</table>

{% endverbatim %}
{% endblock %}

</div>

{% endblock %}

